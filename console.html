<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>Console Log Sample</title>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
  </head>
  <body>
    <div class='container'>
      <div class="jumbotron">
        <h1>Console Log Sample</h1>
        <button id='js-create' class='btn btn-primary btn-lg'>Create</button>
        <button id='js-destroy' class='btn btn-danger btn-lg'>Destroy</button>
      </div>
      <ul>
        <li>
          <h2>1. Click "Create" button.</h2>
          <p>Take heap snapshot and confirm "leaker" object exists.</p>
        </li>
        <li>
          <h2>2. Click "Destroy" button.</h2>
          <p>Type "leak" on console and confirm "leak" is null.</p>
          <p>Take heap snapshot and confirm "leaker" object exists.</p>
        </li>
        <li>
          <h2>3. Clear console.</h2>
          <p>Take heap snapshot and confirm "leaker" object does not exist.</p>
        </li>
      </ul>
    </div>
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js'></script>
    <script>
      var Leaker = function() {};
      Leaker.prototype = {
        init: function() {
          console.log("Leaking an object: %o", this);
        },
        destroy: function() {}
      };

      var leak;
      $(function() {
        $('#js-create').on('click', function() {
          console.log('Create button is clicked.');
          if (leak) {
            return;
          }
          leak = new Leaker();
          leak.init();
        });

        $('#js-destroy').on('click', function() {
          console.log('Destroy button is clicked.');
          leak = null;
        });
      });
    </script>
  </body>
</html>
